<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
			"-//mybatis.org//DTD Mapper 3.0//EN" 
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
			
<mapper namespace="com.itbank.admin_board.CoboardDAO">

	<select id="clist" resultType="coboard" parameterType="hashmap">
		select * from co_board
				where co_deleted = 'n'
				<if test="keyword!=null and keyword.equals('')==false">
	   	 		and ${search} like '%${keyword}%'
	   	 		</if>
	   	 		order by 
					co_idx desc
				offset ${offset} rows
	   	 		fetch first ${perPage} rows only
	</select>
	
	<select id="cboardCount" resultType="int">
		select count(*) from co_board where co_deleted = 'n'
	</select>

	<select id="cselectOne" parameterType="int" resultType="coboard">
		select * from co_board where co_deleted = 'n' and co_idx = #{board_number}
	</select>
	
	<select id="cnext" resultType="coboard" parameterType="int">
		select * from (select co_idx, lead(co_idx) over(order by co_idx) co_next from co_board where co_deleted='n') 
	where co_idx = #{board_number}
	</select>
	
	<select id="cprev" resultType="coboard" parameterType="int">
		select * from (select co_idx, lag(co_idx) over(order by co_idx) co_next from co_board where co_deleted='n') 
	where co_idx = #{board_number}
	</select>
	

</mapper>






