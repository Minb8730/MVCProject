<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
			"-//mybatis.org//DTD Mapper 3.0//EN" 
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
			
<mapper namespace="com.itbank.cinema.CinemaDAO">

	<insert id="insertCinema" parameterType="cinema">
		insert into theater (branch, branch_code, branch_sdate, branch_edate, usable, screen_code, seat_amount)
			values(
			#{branch}, 
			 #{branch_code} ,
				<if test="branch!=null">
					<choose>
						<when test="branch_sdate!=null and branch_sdate.equals('')==false and branch_edate!=null and branch_edate.equals('')==false">
				  	 		#{branch_sdate}, #{branch_edate}, 'n',
						</when>
						<otherwise>
				 			'', '', 'y',
						</otherwise>
					</choose>
		 	 	</if>
		 	 	#{branch} || to_char('00') || #{screen_code},
				${seat_amount}		 	 	
		 	 	)
	
	</insert>
	
	
	<insert id="insertTheater_info" parameterType="theaterInfo">
		insert into theater_info values(#{screen_code}, #{movie_code}, #{movie_title}, #{start_date}, #{end_date}, #{start_time}, #{start_time} + #{runtime}, #{runtime}, #{movie_type})
	
	</insert>
	
	
</mapper>






